# DevRel Visualization Troubleshooting Guide

This guide will help you troubleshoot and resolve issues with the DevRel visualizations.

## Common Issues

### Visualizations Not Appearing

If visualizations are not appearing in the frontend, follow these steps:

1. **Check that backend is running**
   ```bash
   curl http://localhost:8000/healthz
   ```
   You should see `{"status":"ok"}` if the backend is running.

2. **Generate visualizations manually**
   ```bash
   cd backend/app
   ./scripts/utils/generate_test_visualizations.sh
   ```
   This script will generate all visualization data files and place them in the correct location.

3. **Check visualization files exist**
   ```bash
   ls -la backend/app/static/visualizations
   ```
   You should see JSON files like `career_path.json`, `community_graph.json`, etc.

4. **Trigger visualization generation via API**
   ```bash
   curl -X POST http://localhost:8000/api/visualizations/generate
   ```
   This endpoint triggers the visualization generation process.

### API Connection Issues

If the frontend can't connect to the backend API:

1. **Check environment variables**
   Make sure `NEXT_PUBLIC_API_URL` is properly set in your `.env.local` file:
   ```
   NEXT_PUBLIC_API_URL=http://localhost:8000
   ```

2. **Check CORS settings**
   The backend should have CORS enabled for your frontend origin.

3. **Check API credentials**
   If your API requires authentication, make sure credentials are properly set.

## Visualization Component Architecture

The visualization system works as follows:

1. Backend generates JSON data files for visualizations
   - Located in `backend/app/static/visualizations/`
   - Generated by scripts in `backend/app/visualizations/`

2. Backend serves these files via API endpoints:
   - `/api/visualizations/career-path`
   - `/api/visualizations/community-graph`
   - `/api/visualizations/skills-matrix`
   - `/api/visualizations/metrics`

3. Frontend components in `frontend/src/components/visualizations/` fetch this data:
   - Components use `fetch('/api/visualizations/...')` to get data
   - Components render data using D3.js or Recharts

## Debugging Steps

### Backend Debugging

1. **Check logs**
   ```bash
   tail -f backend/logs/app.log
   ```

2. **Run with debug logging**
   ```bash
   PYTHONPATH=backend uvicorn app.main:app --reload --log-level debug
   ```

3. **Test individual visualization generators**
   ```bash
   cd backend
   python -m app.visualizations.career_path
   ```

### Frontend Debugging

1. **Check browser console for errors**

2. **Test API directly in browser**
   Navigate to `http://localhost:8000/api/visualizations/career-path` in your browser

3. **Test components in isolation**
   Create a test page that only renders one visualization component

## Adding New Visualizations

1. Create a new generator class in `backend/app/visualizations/`
2. Add a new API endpoint in `backend/app/api/visualizations/`
3. Update `backend/app/scripts/generate_visualizations.py` to include your new visualization
4. Create a new React component in `frontend/src/components/visualizations/`
5. Update `frontend/src/components/visualizations/index.ts` to export your new component

## Need Help?

If you're still having issues with visualizations after following this guide, please create an issue on GitHub with:

1. A description of the problem
2. Screenshots of any errors
3. Backend logs
4. Browser console logs 